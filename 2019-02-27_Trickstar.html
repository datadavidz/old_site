<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">[datadavidz]</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="blog.html">Blog</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/datadavidz">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><br></p>
<p><img src="img/.jpg" width="400px" /></p>
<div id="was-i-fooled-by-the-trickstar" class="section level2">
<h2><strong>Was I fooled by the Trickstar?</strong></h2>
<p><em>Posted on February 27, 2019</em></p>
<p>A recent event in Lords Mobile for Valentine’s day was a Trickstar monster kill. The Trickstar looks like an evil version of Cupid so I suppose it was an appropriate way to celebrate the holiday. Trickstars appeared on the map every 3 hours for a period of 3 days. The Trickstars can be slayed with 1 energy (basically free). The rewards were holy stars which can be used in the Labyrinth to obtain gems, special materials, gold and other items. Each Trickstar kill produced an immediate rewards of either 50, 100, 200 or 1000 holy stars. I was able to participate in 11 rounds over the first two days. On the third day, I was too busy with the Kingdom vs. Kingdom event to do any dedicated Trickstar hunting.</p>
<p>So, how did the Trickstar event go? Overall, I was able to kill about 32 trickstars per round for a grand total of 350. The total rewards were 43,150 holy stars which was a pretty good haul with an equivalent cost of about 86,300 gems. I was able to use some of these holy stars in the Labyrinth to obtain special materials which allowed me to upgrade my Dragon’s Talon boots to rare (blue) grade.</p>
<p>The overall drop rate for the 1000 holy stars reward was unfortunately quite low (~1%). The following table summarizes the drop rates for each of the holy star rewards.</p>
<table>
<caption>Trickstar/Holy Star Drop Rates</caption>
<thead>
<tr class="header">
<th align="left">Rewards</th>
<th align="center">Count</th>
<th align="center">DropRate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">50 stars</td>
<td align="center">79</td>
<td align="center">22.6%</td>
</tr>
<tr class="even">
<td align="left">100 stars</td>
<td align="center">182</td>
<td align="center">52%</td>
</tr>
<tr class="odd">
<td align="left">200 stars</td>
<td align="center">85</td>
<td align="center">24.3%</td>
</tr>
<tr class="even">
<td align="left">1000 stars</td>
<td align="center">4</td>
<td align="center">1.1%</td>
</tr>
</tbody>
</table>
<div id="does-the-next-reward-depend-on-previous-rewards" class="section level3">
<h3>Does the next reward depend on previous rewards?</h3>
<p>One of the questions which arose during the Trickstar hunting was: “Is it more likely to receive certain rewards after a particular drop?”. It felt at times like you would get a string of 100 holy star rewards and at other times it would seem to alternate between 50 holy stars and 200 holy stars. One way to analyze whether this dependency exists is by Markov Chain analysis. I have used the markovchain package in R to perform the analyses.</p>
<p>The ordered sequence of rewards were first loaded into R.</p>
<pre class="r"><code>filename &lt;- &quot;trickstar_sequence.csv&quot;
folder &lt;- &quot;./data/&quot;
numberCols &lt;- 6 #total number of columns in spreadsheet

colTypes &lt;- str_c(str_dup(&quot;i&quot;, numberCols))
trickstarSequence &lt;- read_csv(paste0(folder, filename), col_types = colTypes)</code></pre>
<pre class="r"><code>rewardSequence &lt;- trickstarSequence %&gt;%
                    gather(&quot;Reward&quot;, &quot;Count&quot;, HS50:HS1000) %&gt;%
                    filter(!is.na(Count)) %&gt;%
                    arrange(Order)</code></pre>
<pre class="r"><code>library(markovchain)</code></pre>
<p>The function verifyMarkovProperty analyzes the sequence to determine whether the sequence satisfies the Markov property. In this case, a p-value &gt; 0.05 indicates one should not reject the null hypothesis that the Markov property holds for a specific transition.</p>
<pre class="r"><code>vmp &lt;- verifyMarkovProperty(rewardSequence$Reward)</code></pre>
<pre><code>## Testing markovianity property on given data sequence
## Chi - square statistic is: 13.50894 
## Degrees of freedom are: 64 
## And corresponding p-value is: 1</code></pre>
<p>The transition matrix for the sequence of Trickstar rewards is given below. The row label is the previous reward drop and the column label is the next reward drop. For example, a 100 holy stars reward was received 99 times when the previous reward was also 100 holy stars. A 1000 holy stars reward was obtained 3 times when the previous rewards was 100 holy stars. The 1000 holy star drops were quite rare (only 4 out of 350) and was never obtained back-to-back nor after a 50 holy stars drop. This observation is likely due to the limited sample size.</p>
<pre class="r"><code>createSequenceMatrix(stringchar = rewardSequence$Reward)</code></pre>
<pre><code>##        HS100 HS1000 HS200 HS50
## HS100     99      3    38   41
## HS1000     2      0     2    0
## HS200     44      1    23   17
## HS50      37      0    22   20</code></pre>
<p>As calculated previously, the drop rates for the different holy star rewards are:</p>
<pre class="r"><code>mcRewards &lt;- markovchainFit(data=rewardSequence$Reward)$estimate
steadyStates(mcRewards)</code></pre>
<pre><code>##          HS100     HS1000     HS200      HS50
## [1,] 0.5217254 0.01151036 0.2433529 0.2234113</code></pre>
</div>
<div id="analysis-of-the-transitional-probabilities" class="section level3">
<h3>Analysis of the transitional probabilities</h3>
<p>The transitional probabilities are given in the following table:</p>
<pre class="r"><code>mcRewards</code></pre>
<pre><code>## MLE Fit 
##  A  4 - dimensional discrete Markov Chain defined by the following states: 
##  HS100, HS1000, HS200, HS50 
##  The transition matrix  (by rows)  is defined as follows: 
##            HS100     HS1000     HS200      HS50
## HS100  0.5469613 0.01657459 0.2099448 0.2265193
## HS1000 0.5000000 0.00000000 0.5000000 0.0000000
## HS200  0.5176471 0.01176471 0.2705882 0.2000000
## HS50   0.4683544 0.00000000 0.2784810 0.2531646</code></pre>
<p>The columns of the transition matrix should be close to the steady state probabilities (drop rates) if there is no dependency between the current reward and the next reward. A more detailed analysis including the 95% confidence intervals around the transitional probabilities shows that they include the drop rates. Therefore, we cannot say there is a dependency between current and next rewards and the sequence could be randomly generated from the listed drop rates.</p>
<pre class="r"><code>markovchainFit(data=rewardSequence$Reward)</code></pre>
<pre><code>## $estimate
## MLE Fit 
##  A  4 - dimensional discrete Markov Chain defined by the following states: 
##  HS100, HS1000, HS200, HS50 
##  The transition matrix  (by rows)  is defined as follows: 
##            HS100     HS1000     HS200      HS50
## HS100  0.5469613 0.01657459 0.2099448 0.2265193
## HS1000 0.5000000 0.00000000 0.5000000 0.0000000
## HS200  0.5176471 0.01176471 0.2705882 0.2000000
## HS50   0.4683544 0.00000000 0.2784810 0.2531646
## 
## 
## $standardError
##             HS100      HS1000      HS200       HS50
## HS100  0.05497168 0.009569341 0.03405754 0.03537638
## HS1000 0.35355339 0.000000000 0.35355339 0.00000000
## HS200  0.07803823 0.011764706 0.05642155 0.04850713
## HS50   0.07699699 0.000000000 0.05937235 0.05660932
## 
## $confidenceLevel
## [1] 0.95
## 
## $lowerEndpointMatrix
##            HS100       HS1000     HS200      HS50
## HS100  0.4565410 0.0008344196 0.1539251 0.1683304
## HS1000 0.0000000 0.0000000000 0.0000000 0.0000000
## HS200  0.3892856 0.0000000000 0.1777830 0.1202129
## HS50   0.3417056 0.0000000000 0.1808222 0.1600505
## 
## $upperEndpointMatrix
##            HS100     HS1000     HS200      HS50
## HS100  0.6373817 0.03231475 0.2659644 0.2847083
## HS1000 1.0000000 0.00000000 1.0000000 0.0000000
## HS200  0.6460085 0.03111593 0.3633934 0.2797871
## HS50   0.5950032 0.00000000 0.3761398 0.3462786
## 
## $logLikelihood
## [1] -369.508</code></pre>
</div>
<div id="summary" class="section level3">
<h3>Summary</h3>
<p>So, I don’t feel I was fooled by Trickstar in this event. In fact, the event was well-worth the effort with 43,150 holy stars obtained over two days of hunting. The drop rate was highest for the 100 holy star rewards (~52%) and the 1000 holy star reward was quite rare (~ 1% drop rate). The rewards appear to be randomly generated based on the drop rates and I could not statistically conclude using Markov Chain analysis that any dependency exists between the previous reward and the next reward.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
