<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>2021-04-13_tt_PostOffices.utf8</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">[datadavidz]</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="blog.html">Blog</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/datadavidz">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>




</div>


<p><br></p>
<div id="tidytuesday-u.s.-post-offices" class="section level2">
<h2><strong>TidyTuesday: U.S. Post Offices</strong></h2>
<p><em>Posted on April 13, 2021</em></p>
<p>A quick analysis of the weekly <a href="http://github.com/rfordatascience/tidytuesday">#TidyTuesday</a> dataset organized by the R4DS Online Learning Community. My approach is to apply my data science skills to explore one question I have about the data and generate a visualization that addresses this question. The main purpose for me is to practice and try out new things. I am never completely satisfied with the end result but I do the best I can in a short period of time.</p>
<p><strong>What I learned this week about R and the Tidyverse</strong></p>
<ul>
<li>Process to reproduce a hexbin map as shown in the R Graph Gallery</li>
<li>State names and abbreviations are built into base R (<code>state.names</code> and <code>state.abb</code>)</li>
</ul>
<p><strong>Brief explanation of the dataset</strong></p>
<p>For this #TidyTuesday, I wanted to create a hexbin map similar to the example shown in the <a href="https://www.r-graph-gallery.com/328-hexbin-map-of-the-usa.html">R Graph Gallery</a>. A lot of libraries and data formats were required that I had little knowledge of before attempting this visualization. The post office dataset contained information on the years of operation for each post office along with a lot of information about the location of each post office within the United States. The dataset covered a long time period from late 19th century up to 2000. I decided to supplement this data with population data for each state to estimate the average population served by post offices in each state.</p>
<div id="wrangle" class="section level3">
<h3>Wrangle</h3>
<p>Initial conclusions from exploring the post_offices dataset.</p>
<ul>
<li>The established date for post offices ranged from 1877-2000.<br />
</li>
<li>The discontinued date can be missing and would suggest the post office is still in operation as of 2000.<br />
</li>
<li>The state and county is available for almost all of the post offices.</li>
<li>The GNIS information including latitude and longitude is present for about 2/3 of the data.</li>
</ul>
<p>The assumption is that the missing (NA) discontinued year means the post office is still operating. Based on this assumption, we calculate the number of post offices per state and as a ratio to the number of US House of Representatives for each state.</p>
<pre class="r"><code>office_count &lt;- post_offices %&gt;%
  select(id, name, state, established, discontinued) %&gt;%
  filter(is.na(discontinued)) %&gt;%
  group_by(state) %&gt;%
  summarize(offices = n(), .groups = &quot;drop&quot;)

office_ratio &lt;- us_reps %&gt;%
  left_join(tibble(state = state.name, id = state.abb), by = &quot;state&quot;) %&gt;%
  left_join(office_count, by = c(&quot;id&quot; =  &quot;state&quot;)) %&gt;%
  mutate(rep_ratio = offices / representatives_number,
         pop_ratio = pop / offices) %&gt;%
  arrange(desc(pop_ratio))</code></pre>
</div>
<div id="visualize" class="section level3">
<h3>Visualize</h3>
<p>Let’s first look at the states with the most number of post offices.</p>
<pre class="r"><code>office_count %&gt;%
  arrange(desc(offices)) %&gt;%
  slice(1:10) %&gt;%
  mutate(state = fct_reorder(state, offices)) %&gt;%
  ggplot(aes(x = offices, y = state)) +
  geom_col(fill = &quot;steelblue&quot;) +
  labs(title = &quot;Top 10 States with the Highest Number of Post Offices&quot;,
       x = &quot;# of Post Offices&quot;,
       y = NULL)</code></pre>
<p><img src="2021-04-13_tt_PostOffices_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Now let’s look at the ratio of post offices per US representatives for each state.</p>
<pre class="r"><code>office_ratio %&gt;%
  arrange(desc(rep_ratio)) %&gt;%
  slice(1:10) %&gt;%
  mutate(state = fct_reorder(state, rep_ratio)) %&gt;%
  ggplot(aes(x = rep_ratio, y = state)) +
  geom_col(fill = &quot;midnightblue&quot;) +
  labs(title = &quot;Top 10 States with the Highest Number of Post Offices per US Rep&quot;,
       x = &quot;# of Post Offices&quot;,
       y = NULL)</code></pre>
<p><img src="2021-04-13_tt_PostOffices_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The most post offices per state generally includes the most populous states while the most post offices per US representatives includes some of the less populous states. Kentucky and Iowa show up in both top ten lists. I decided from here that I was most interested in the average population served by the post offices in each state. I wanted to create a map but not using the US map but rather a hexbin representation I had come across previously.</p>
<p>Creating the hexbin map was more complicated than I thought it would be when I began. The first step was to download a geojson file which I found <a href="https://team.carto.com/u/andrew/tables/andrew.us_states_hexgrid/public/map">here</a>. This file contained the boundaries for the hexagons for each state. The file is read using the <code>geojsonio</code> package into a <code>SpatialPolygonsDataFrame</code> class.</p>
<pre class="r"><code>#geojsonio package
spdf &lt;- geojson_read(&quot;data/us_states_hexgrid.geojson&quot;,  what = &quot;sp&quot;)

#reformat the state name
spdf@data = spdf@data %&gt;%
  mutate(google_name = gsub(&quot; \\(United States\\)&quot;, &quot;&quot;, google_name))

# Show it (requires rgdal library)
plot(spdf)</code></pre>
<p><img src="2021-04-13_tt_PostOffices_files/figure-html/Visualize-1.png" width="672" /></p>
<p>We can then reformat the spdf data into a standard data frame using the <code>tidy</code> function from the <code>broom</code> package. Next, we need to calculate the center of each hexagon for adding the label with the state abbreviation. The centroid is calculated from the spdf data using a function from the <code>rgeos</code> package.</p>
<pre class="r"><code># reformat as data frame for ggplot
spdf_fortified &lt;- tidy(spdf, region = &quot;iso3166_2&quot;)

#calculate centroid of each hexagon for adding label
centers &lt;- cbind.data.frame(data.frame(gCentroid(spdf, byid=TRUE), id=spdf@data$iso3166_2))

ggplot() +
  geom_polygon(data = spdf_fortified, aes( x = long, y = lat, group = group), fill=&quot;skyblue&quot;, color=&quot;white&quot;) +
  geom_text(data=centers, aes(x=x, y=y, label=id)) +
  theme_void() +
  coord_map()</code></pre>
<p><img src="2021-04-13_tt_PostOffices_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Next, we add the ratio of state population to number of post offices and segregate into bins.</p>
<pre class="r"><code>spdf_fortified &lt;- spdf_fortified %&gt;%
  left_join(select(office_ratio, id, pop_ratio), by = &quot;id&quot;) %&gt;%
  filter(!is.na(pop_ratio))

spdf_fortified$bin &lt;- cut( spdf_fortified$pop_ratio , breaks=c(seq(0, 20000, 5000), Inf), 
                           labels=c(&quot;&lt; 5K&quot;, &quot;5-10K&quot;, &quot;10-15K&quot;, &quot;15-20K&quot;, &quot;20K+&quot;) , include.lowest = TRUE )</code></pre>
<p>Finally, we create the hexbin map with the post office data.</p>
<pre class="r"><code>my_palette &lt;- rev(magma(8))[c(-1,-8)]

p1 &lt;- ggplot() +
  geom_polygon(data = spdf_fortified, aes(fill = bin, x = long, y = lat, group = group) , size=0, alpha=0.9) +
  geom_text(data=centers, aes(x=x, y=y, label=id), color=&quot;white&quot;, size=3, alpha=0.6) +
  theme_void() +
  scale_fill_manual( 
    values=my_palette, 
    name=&quot;Average population served per post office&quot;, 
    guide = guide_legend( keyheight = unit(3, units = &quot;mm&quot;), keywidth=unit(12, units = &quot;mm&quot;), label.position = &quot;bottom&quot;, title.position = &#39;top&#39;, nrow=1) 
  ) +
  labs( title = &quot;Population Served per Post Office ca. 2000&quot;,
        caption = &quot;Graphic: @datadavidz | Source: Blevins and Helbock | #TidyTuesday&quot;) +
  theme(
    legend.position = c(0.5, 0.9),
    text = element_text(color = &quot;#22211d&quot;),
    plot.background = element_rect(fill = &quot;#f5f5f2&quot;, color = NA), 
    panel.background = element_rect(fill = &quot;#f5f5f2&quot;, color = NA), 
    legend.background = element_rect(fill = &quot;#f5f5f2&quot;, color = NA),
    plot.title = element_text(family = &quot;Oswald&quot;, size= 22, hjust=0.5, color = &quot;#4e4d47&quot;, margin = margin(b = -0.1, t = 0.4, l = 2, unit = &quot;cm&quot;)),
    plot.caption = element_text(hjust = 0.95, vjust = 1)
  )

p1</code></pre>
<p><img src="2021-04-13_tt_PostOffices_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="summary" class="section level3">
<h3>Summary</h3>
<p>I felt this hexbin map was an effective and aesthetically-pleasing graphic for the analysis. The construction of the hexbin map was more complex than I imagined requiring a website download, multiple packages I don’t normally use and new data formats. I have seen people make similar plots using the <code>geofacet</code> package and I am interested whether this could simplify the process. However, this package doesn’t appear to be able to easily make the hexagon shapes.</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQpvdXRwdXQ6IA0KICBodG1sX2RvY3VtZW50Og0KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUNCiAgICBpbmNsdWRlczoNCiAgICAgIGFmdGVyX2JvZHk6IGZvb3Rlci5odG1sDQotLS0NCg0KPGJyPg0KDQpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0NCmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICBmaWcuc2hvd3RleHQgPSBUUlVFKQ0KDQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCmxpYnJhcnkodGlkeXR1ZXNkYXlSKQ0KDQpsaWJyYXJ5KGdlb2pzb25pbykNCmxpYnJhcnkocmdkYWwpDQpsaWJyYXJ5KGJyb29tKQ0KbGlicmFyeShyZ2VvcykNCg0KbGlicmFyeSh2aXJpZGlzKQ0KbGlicmFyeShzaG93dGV4dCkNCg0KZm9udF9hZGRfZ29vZ2xlKG5hbWUgPSAiT3N3YWxkIikNCg0Kc2hvd3RleHRfYXV0bygpDQp0aGVtZV9zZXQodGhlbWVfbWluaW1hbCgpKQ0KYGBgDQoNCiMjICoqVGlkeVR1ZXNkYXk6IFUuUy4gUG9zdCBPZmZpY2VzKioNCg0KKlBvc3RlZCBvbiBBcHJpbCAxMywgMjAyMSoNCg0KQSBxdWljayBhbmFseXNpcyBvZiB0aGUgd2Vla2x5IFtcI1RpZHlUdWVzZGF5XShodHRwOi8vZ2l0aHViLmNvbS9yZm9yZGF0YXNjaWVuY2UvdGlkeXR1ZXNkYXkpIGRhdGFzZXQgb3JnYW5pemVkIGJ5IHRoZSBSNERTIE9ubGluZSBMZWFybmluZyBDb21tdW5pdHkuIE15IGFwcHJvYWNoIGlzIHRvIGFwcGx5IG15IGRhdGEgc2NpZW5jZSBza2lsbHMgdG8gZXhwbG9yZSBvbmUgcXVlc3Rpb24gSSBoYXZlIGFib3V0IHRoZSBkYXRhIGFuZCBnZW5lcmF0ZSBhIHZpc3VhbGl6YXRpb24gdGhhdCBhZGRyZXNzZXMgdGhpcyBxdWVzdGlvbi4gVGhlIG1haW4gcHVycG9zZSBmb3IgbWUgaXMgdG8gcHJhY3RpY2UgYW5kIHRyeSBvdXQgbmV3IHRoaW5ncy4gSSBhbSBuZXZlciBjb21wbGV0ZWx5IHNhdGlzZmllZCB3aXRoIHRoZSBlbmQgcmVzdWx0IGJ1dCBJIGRvIHRoZSBiZXN0IEkgY2FuIGluIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUuDQoNCioqV2hhdCBJIGxlYXJuZWQgdGhpcyB3ZWVrIGFib3V0IFIgYW5kIHRoZSBUaWR5dmVyc2UqKg0KDQotICAgUHJvY2VzcyB0byByZXByb2R1Y2UgYSBoZXhiaW4gbWFwIGFzIHNob3duIGluIHRoZSBSIEdyYXBoIEdhbGxlcnkNCi0gICBTdGF0ZSBuYW1lcyBhbmQgYWJicmV2aWF0aW9ucyBhcmUgYnVpbHQgaW50byBiYXNlIFIgKGBgYHN0YXRlLm5hbWVzYGBgIGFuZCBgYGBzdGF0ZS5hYmJgYGApDQoNCioqQnJpZWYgZXhwbGFuYXRpb24gb2YgdGhlIGRhdGFzZXQqKg0KDQpGb3IgdGhpcyAjVGlkeVR1ZXNkYXksIEkgd2FudGVkIHRvIGNyZWF0ZSBhIGhleGJpbiBtYXAgc2ltaWxhciB0byB0aGUgZXhhbXBsZSBzaG93biBpbiB0aGUgW1IgR3JhcGggR2FsbGVyeV0oaHR0cHM6Ly93d3cuci1ncmFwaC1nYWxsZXJ5LmNvbS8zMjgtaGV4YmluLW1hcC1vZi10aGUtdXNhLmh0bWwpLiAgQSBsb3Qgb2YgbGlicmFyaWVzIGFuZCBkYXRhIGZvcm1hdHMgd2VyZSByZXF1aXJlZCB0aGF0IEkgaGFkIGxpdHRsZSBrbm93bGVkZ2Ugb2YgYmVmb3JlIGF0dGVtcHRpbmcgdGhpcyB2aXN1YWxpemF0aW9uLiAgVGhlIHBvc3Qgb2ZmaWNlIGRhdGFzZXQgY29udGFpbmVkIGluZm9ybWF0aW9uIG9uIHRoZSB5ZWFycyBvZiBvcGVyYXRpb24gZm9yIGVhY2ggcG9zdCBvZmZpY2UgYWxvbmcgd2l0aCBhIGxvdCBvZiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbG9jYXRpb24gb2YgZWFjaCBwb3N0IG9mZmljZSB3aXRoaW4gdGhlIFVuaXRlZCBTdGF0ZXMuICBUaGUgZGF0YXNldCBjb3ZlcmVkIGEgbG9uZyB0aW1lIHBlcmlvZCBmcm9tIGxhdGUgMTl0aCBjZW50dXJ5IHVwIHRvIDIwMDAuICBJIGRlY2lkZWQgdG8gc3VwcGxlbWVudCB0aGlzIGRhdGEgd2l0aCBwb3B1bGF0aW9uIGRhdGEgZm9yIGVhY2ggc3RhdGUgdG8gZXN0aW1hdGUgdGhlIGF2ZXJhZ2UgcG9wdWxhdGlvbiBzZXJ2ZWQgYnkgcG9zdCBvZmZpY2VzIGluIGVhY2ggc3RhdGUuDQoNCmBgYHtyIExvYWQsIGluY2x1ZGUgPSBGQUxTRX0NCiNTYXZlIG5lZWRlZCBkYXRhIGludG8gcmRzIGZvciBibG9nIHBvc3QNCmxvYWQoIi4vZGF0YS90dF8yMTA0MTMuUmRhdGEiKQ0KYGBgDQoNCiMjIyBXcmFuZ2xlDQoNCkluaXRpYWwgY29uY2x1c2lvbnMgZnJvbSBleHBsb3JpbmcgdGhlIHBvc3Rfb2ZmaWNlcyBkYXRhc2V0LiAgDQoNCiogVGhlIGVzdGFibGlzaGVkIGRhdGUgZm9yIHBvc3Qgb2ZmaWNlcyByYW5nZWQgZnJvbSAxODc3LTIwMDAuICANCiogVGhlIGRpc2NvbnRpbnVlZCBkYXRlIGNhbiBiZSBtaXNzaW5nIGFuZCB3b3VsZCBzdWdnZXN0IHRoZSBwb3N0IG9mZmljZSBpcyBzdGlsbCBpbiBvcGVyYXRpb24gYXMgb2YgMjAwMC4gIA0KKiBUaGUgc3RhdGUgYW5kIGNvdW50eSBpcyBhdmFpbGFibGUgZm9yIGFsbW9zdCBhbGwgb2YgdGhlIHBvc3Qgb2ZmaWNlcy4NCiogVGhlIEdOSVMgaW5mb3JtYXRpb24gaW5jbHVkaW5nIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgaXMgcHJlc2VudCBmb3IgYWJvdXQgMi8zIG9mIHRoZSBkYXRhLiAgDQoNClRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIG1pc3NpbmcgKE5BKSBkaXNjb250aW51ZWQgeWVhciBtZWFucyB0aGUgcG9zdCBvZmZpY2UgaXMgc3RpbGwgb3BlcmF0aW5nLiAgQmFzZWQgb24gdGhpcyBhc3N1bXB0aW9uLCB3ZSBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiBwb3N0IG9mZmljZXMgcGVyIHN0YXRlIGFuZCBhcyBhIHJhdGlvIHRvIHRoZSBudW1iZXIgb2YgVVMgSG91c2Ugb2YgUmVwcmVzZW50YXRpdmVzIGZvciBlYWNoIHN0YXRlLg0KDQpgYGB7ciBXcmFuZ2xlfQ0Kb2ZmaWNlX2NvdW50IDwtIHBvc3Rfb2ZmaWNlcyAlPiUNCiAgc2VsZWN0KGlkLCBuYW1lLCBzdGF0ZSwgZXN0YWJsaXNoZWQsIGRpc2NvbnRpbnVlZCkgJT4lDQogIGZpbHRlcihpcy5uYShkaXNjb250aW51ZWQpKSAlPiUNCiAgZ3JvdXBfYnkoc3RhdGUpICU+JQ0KICBzdW1tYXJpemUob2ZmaWNlcyA9IG4oKSwgLmdyb3VwcyA9ICJkcm9wIikNCg0Kb2ZmaWNlX3JhdGlvIDwtIHVzX3JlcHMgJT4lDQogIGxlZnRfam9pbih0aWJibGUoc3RhdGUgPSBzdGF0ZS5uYW1lLCBpZCA9IHN0YXRlLmFiYiksIGJ5ID0gInN0YXRlIikgJT4lDQogIGxlZnRfam9pbihvZmZpY2VfY291bnQsIGJ5ID0gYygiaWQiID0gICJzdGF0ZSIpKSAlPiUNCiAgbXV0YXRlKHJlcF9yYXRpbyA9IG9mZmljZXMgLyByZXByZXNlbnRhdGl2ZXNfbnVtYmVyLA0KICAgICAgICAgcG9wX3JhdGlvID0gcG9wIC8gb2ZmaWNlcykgJT4lDQogIGFycmFuZ2UoZGVzYyhwb3BfcmF0aW8pKQ0KYGBgDQoNCiMjIyBWaXN1YWxpemUNCg0KTGV0J3MgZmlyc3QgbG9vayBhdCB0aGUgc3RhdGVzIHdpdGggdGhlIG1vc3QgbnVtYmVyIG9mIHBvc3Qgb2ZmaWNlcy4NCmBgYHtyfQ0Kb2ZmaWNlX2NvdW50ICU+JQ0KICBhcnJhbmdlKGRlc2Mob2ZmaWNlcykpICU+JQ0KICBzbGljZSgxOjEwKSAlPiUNCiAgbXV0YXRlKHN0YXRlID0gZmN0X3Jlb3JkZXIoc3RhdGUsIG9mZmljZXMpKSAlPiUNCiAgZ2dwbG90KGFlcyh4ID0gb2ZmaWNlcywgeSA9IHN0YXRlKSkgKw0KICBnZW9tX2NvbChmaWxsID0gInN0ZWVsYmx1ZSIpICsNCiAgbGFicyh0aXRsZSA9ICJUb3AgMTAgU3RhdGVzIHdpdGggdGhlIEhpZ2hlc3QgTnVtYmVyIG9mIFBvc3QgT2ZmaWNlcyIsDQogICAgICAgeCA9ICIjIG9mIFBvc3QgT2ZmaWNlcyIsDQogICAgICAgeSA9IE5VTEwpDQpgYGANCg0KTm93IGxldCdzIGxvb2sgYXQgdGhlIHJhdGlvIG9mIHBvc3Qgb2ZmaWNlcyBwZXIgVVMgcmVwcmVzZW50YXRpdmVzIGZvciBlYWNoIHN0YXRlLg0KYGBge3J9DQpvZmZpY2VfcmF0aW8gJT4lDQogIGFycmFuZ2UoZGVzYyhyZXBfcmF0aW8pKSAlPiUNCiAgc2xpY2UoMToxMCkgJT4lDQogIG11dGF0ZShzdGF0ZSA9IGZjdF9yZW9yZGVyKHN0YXRlLCByZXBfcmF0aW8pKSAlPiUNCiAgZ2dwbG90KGFlcyh4ID0gcmVwX3JhdGlvLCB5ID0gc3RhdGUpKSArDQogIGdlb21fY29sKGZpbGwgPSAibWlkbmlnaHRibHVlIikgKw0KICBsYWJzKHRpdGxlID0gIlRvcCAxMCBTdGF0ZXMgd2l0aCB0aGUgSGlnaGVzdCBOdW1iZXIgb2YgUG9zdCBPZmZpY2VzIHBlciBVUyBSZXAiLA0KICAgICAgIHggPSAiIyBvZiBQb3N0IE9mZmljZXMiLA0KICAgICAgIHkgPSBOVUxMKQ0KYGBgDQoNClRoZSBtb3N0IHBvc3Qgb2ZmaWNlcyBwZXIgc3RhdGUgZ2VuZXJhbGx5IGluY2x1ZGVzIHRoZSBtb3N0IHBvcHVsb3VzIHN0YXRlcyB3aGlsZSB0aGUgbW9zdCBwb3N0IG9mZmljZXMgcGVyIFVTIHJlcHJlc2VudGF0aXZlcyBpbmNsdWRlcyBzb21lIG9mIHRoZSBsZXNzIHBvcHVsb3VzIHN0YXRlcy4gIEtlbnR1Y2t5IGFuZCBJb3dhIHNob3cgdXAgaW4gYm90aCB0b3AgdGVuIGxpc3RzLiAgSSBkZWNpZGVkIGZyb20gaGVyZSB0aGF0IEkgd2FzIG1vc3QgaW50ZXJlc3RlZCBpbiB0aGUgYXZlcmFnZSBwb3B1bGF0aW9uIHNlcnZlZCBieSB0aGUgcG9zdCBvZmZpY2VzIGluIGVhY2ggc3RhdGUuICBJIHdhbnRlZCB0byBjcmVhdGUgYSBtYXAgYnV0IG5vdCB1c2luZyB0aGUgVVMgbWFwIGJ1dCByYXRoZXIgYSBoZXhiaW4gcmVwcmVzZW50YXRpb24gSSBoYWQgY29tZSBhY3Jvc3MgcHJldmlvdXNseS4NCg0KQ3JlYXRpbmcgdGhlIGhleGJpbiBtYXAgd2FzIG1vcmUgY29tcGxpY2F0ZWQgdGhhbiBJIHRob3VnaHQgaXQgd291bGQgYmUgd2hlbiBJIGJlZ2FuLiAgVGhlIGZpcnN0IHN0ZXAgd2FzIHRvIGRvd25sb2FkIGEgZ2VvanNvbiBmaWxlIHdoaWNoIEkgZm91bmQgW2hlcmVdKGh0dHBzOi8vdGVhbS5jYXJ0by5jb20vdS9hbmRyZXcvdGFibGVzL2FuZHJldy51c19zdGF0ZXNfaGV4Z3JpZC9wdWJsaWMvbWFwKS4gIFRoaXMgZmlsZSBjb250YWluZWQgdGhlIGJvdW5kYXJpZXMgZm9yIHRoZSBoZXhhZ29ucyBmb3IgZWFjaCBzdGF0ZS4gIFRoZSBmaWxlIGlzIHJlYWQgdXNpbmcgdGhlIGBgYGdlb2pzb25pb2BgYCBwYWNrYWdlIGludG8gYSBgYGBTcGF0aWFsUG9seWdvbnNEYXRhRnJhbWVgYGAgY2xhc3MuDQoNCmBgYHtyIFZpc3VhbGl6ZX0NCiNnZW9qc29uaW8gcGFja2FnZQ0Kc3BkZiA8LSBnZW9qc29uX3JlYWQoImRhdGEvdXNfc3RhdGVzX2hleGdyaWQuZ2VvanNvbiIsICB3aGF0ID0gInNwIikNCg0KI3JlZm9ybWF0IHRoZSBzdGF0ZSBuYW1lDQpzcGRmQGRhdGEgPSBzcGRmQGRhdGEgJT4lDQogIG11dGF0ZShnb29nbGVfbmFtZSA9IGdzdWIoIiBcXChVbml0ZWQgU3RhdGVzXFwpIiwgIiIsIGdvb2dsZV9uYW1lKSkNCg0KIyBTaG93IGl0IChyZXF1aXJlcyByZ2RhbCBsaWJyYXJ5KQ0KcGxvdChzcGRmKQ0KYGBgDQoNCldlIGNhbiB0aGVuIHJlZm9ybWF0IHRoZSBzcGRmIGRhdGEgaW50byBhIHN0YW5kYXJkIGRhdGEgZnJhbWUgdXNpbmcgdGhlIGBgYHRpZHlgYGAgZnVuY3Rpb24gZnJvbSB0aGUgYGBgYnJvb21gYGAgcGFja2FnZS4gIE5leHQsIHdlIG5lZWQgdG8gY2FsY3VsYXRlIHRoZSBjZW50ZXIgb2YgZWFjaCBoZXhhZ29uIGZvciBhZGRpbmcgdGhlIGxhYmVsIHdpdGggdGhlIHN0YXRlIGFiYnJldmlhdGlvbi4gIFRoZSBjZW50cm9pZCBpcyBjYWxjdWxhdGVkIGZyb20gdGhlIHNwZGYgZGF0YSB1c2luZyBhIGZ1bmN0aW9uIGZyb20gdGhlIGBgYHJnZW9zYGBgIHBhY2thZ2UuDQpgYGB7cn0NCiMgcmVmb3JtYXQgYXMgZGF0YSBmcmFtZSBmb3IgZ2dwbG90DQpzcGRmX2ZvcnRpZmllZCA8LSB0aWR5KHNwZGYsIHJlZ2lvbiA9ICJpc28zMTY2XzIiKQ0KDQojY2FsY3VsYXRlIGNlbnRyb2lkIG9mIGVhY2ggaGV4YWdvbiBmb3IgYWRkaW5nIGxhYmVsDQpjZW50ZXJzIDwtIGNiaW5kLmRhdGEuZnJhbWUoZGF0YS5mcmFtZShnQ2VudHJvaWQoc3BkZiwgYnlpZD1UUlVFKSwgaWQ9c3BkZkBkYXRhJGlzbzMxNjZfMikpDQoNCmdncGxvdCgpICsNCiAgZ2VvbV9wb2x5Z29uKGRhdGEgPSBzcGRmX2ZvcnRpZmllZCwgYWVzKCB4ID0gbG9uZywgeSA9IGxhdCwgZ3JvdXAgPSBncm91cCksIGZpbGw9InNreWJsdWUiLCBjb2xvcj0id2hpdGUiKSArDQogIGdlb21fdGV4dChkYXRhPWNlbnRlcnMsIGFlcyh4PXgsIHk9eSwgbGFiZWw9aWQpKSArDQogIHRoZW1lX3ZvaWQoKSArDQogIGNvb3JkX21hcCgpDQpgYGANCg0KTmV4dCwgd2UgYWRkIHRoZSByYXRpbyBvZiBzdGF0ZSBwb3B1bGF0aW9uIHRvIG51bWJlciBvZiBwb3N0IG9mZmljZXMgYW5kIHNlZ3JlZ2F0ZSBpbnRvIGJpbnMuDQpgYGB7cn0NCnNwZGZfZm9ydGlmaWVkIDwtIHNwZGZfZm9ydGlmaWVkICU+JQ0KICBsZWZ0X2pvaW4oc2VsZWN0KG9mZmljZV9yYXRpbywgaWQsIHBvcF9yYXRpbyksIGJ5ID0gImlkIikgJT4lDQogIGZpbHRlcighaXMubmEocG9wX3JhdGlvKSkNCg0Kc3BkZl9mb3J0aWZpZWQkYmluIDwtIGN1dCggc3BkZl9mb3J0aWZpZWQkcG9wX3JhdGlvICwgYnJlYWtzPWMoc2VxKDAsIDIwMDAwLCA1MDAwKSwgSW5mKSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHM9YygiPCA1SyIsICI1LTEwSyIsICIxMC0xNUsiLCAiMTUtMjBLIiwgIjIwSysiKSAsIGluY2x1ZGUubG93ZXN0ID0gVFJVRSApDQpgYGANCg0KRmluYWxseSwgd2UgY3JlYXRlIHRoZSBoZXhiaW4gbWFwIHdpdGggdGhlIHBvc3Qgb2ZmaWNlIGRhdGEuDQpgYGB7cn0NCm15X3BhbGV0dGUgPC0gcmV2KG1hZ21hKDgpKVtjKC0xLC04KV0NCg0KcDEgPC0gZ2dwbG90KCkgKw0KICBnZW9tX3BvbHlnb24oZGF0YSA9IHNwZGZfZm9ydGlmaWVkLCBhZXMoZmlsbCA9IGJpbiwgeCA9IGxvbmcsIHkgPSBsYXQsIGdyb3VwID0gZ3JvdXApICwgc2l6ZT0wLCBhbHBoYT0wLjkpICsNCiAgZ2VvbV90ZXh0KGRhdGE9Y2VudGVycywgYWVzKHg9eCwgeT15LCBsYWJlbD1pZCksIGNvbG9yPSJ3aGl0ZSIsIHNpemU9MywgYWxwaGE9MC42KSArDQogIHRoZW1lX3ZvaWQoKSArDQogIHNjYWxlX2ZpbGxfbWFudWFsKCANCiAgICB2YWx1ZXM9bXlfcGFsZXR0ZSwgDQogICAgbmFtZT0iQXZlcmFnZSBwb3B1bGF0aW9uIHNlcnZlZCBwZXIgcG9zdCBvZmZpY2UiLCANCiAgICBndWlkZSA9IGd1aWRlX2xlZ2VuZCgga2V5aGVpZ2h0ID0gdW5pdCgzLCB1bml0cyA9ICJtbSIpLCBrZXl3aWR0aD11bml0KDEyLCB1bml0cyA9ICJtbSIpLCBsYWJlbC5wb3NpdGlvbiA9ICJib3R0b20iLCB0aXRsZS5wb3NpdGlvbiA9ICd0b3AnLCBucm93PTEpIA0KICApICsNCiAgbGFicyggdGl0bGUgPSAiUG9wdWxhdGlvbiBTZXJ2ZWQgcGVyIFBvc3QgT2ZmaWNlIGNhLiAyMDAwIiwNCiAgICAgICAgY2FwdGlvbiA9ICJHcmFwaGljOiBAZGF0YWRhdmlkeiB8IFNvdXJjZTogQmxldmlucyBhbmQgSGVsYm9jayB8ICNUaWR5VHVlc2RheSIpICsNCiAgdGhlbWUoDQogICAgbGVnZW5kLnBvc2l0aW9uID0gYygwLjUsIDAuOSksDQogICAgdGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjMjIyMTFkIiksDQogICAgcGxvdC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiI2Y1ZjVmMiIsIGNvbG9yID0gTkEpLCANCiAgICBwYW5lbC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiI2Y1ZjVmMiIsIGNvbG9yID0gTkEpLCANCiAgICBsZWdlbmQuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiNmNWY1ZjIiLCBjb2xvciA9IE5BKSwNCiAgICBwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGZhbWlseSA9ICJPc3dhbGQiLCBzaXplPSAyMiwgaGp1c3Q9MC41LCBjb2xvciA9ICIjNGU0ZDQ3IiwgbWFyZ2luID0gbWFyZ2luKGIgPSAtMC4xLCB0ID0gMC40LCBsID0gMiwgdW5pdCA9ICJjbSIpKSwNCiAgICBwbG90LmNhcHRpb24gPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjk1LCB2anVzdCA9IDEpDQogICkNCg0KcDENCmBgYA0KDQojIyMgU3VtbWFyeQ0KDQpJIGZlbHQgdGhpcyBoZXhiaW4gbWFwIHdhcyBhbiBlZmZlY3RpdmUgYW5kIGFlc3RoZXRpY2FsbHktcGxlYXNpbmcgZ3JhcGhpYyBmb3IgdGhlIGFuYWx5c2lzLiAgVGhlIGNvbnN0cnVjdGlvbiBvZiB0aGUgaGV4YmluIG1hcCB3YXMgbW9yZSBjb21wbGV4IHRoYW4gSSBpbWFnaW5lZCByZXF1aXJpbmcgYSB3ZWJzaXRlIGRvd25sb2FkLCBtdWx0aXBsZSBwYWNrYWdlcyBJIGRvbid0IG5vcm1hbGx5IHVzZSBhbmQgbmV3IGRhdGEgZm9ybWF0cy4gIEkgaGF2ZSBzZWVuIHBlb3BsZSBtYWtlIHNpbWlsYXIgcGxvdHMgdXNpbmcgdGhlIGBgYGdlb2ZhY2V0YGBgIHBhY2thZ2UgYW5kIEkgYW0gaW50ZXJlc3RlZCB3aGV0aGVyIHRoaXMgY291bGQgc2ltcGxpZnkgdGhlIHByb2Nlc3MuICBIb3dldmVyLCB0aGlzIHBhY2thZ2UgZG9lc24ndCBhcHBlYXIgdG8gYmUgYWJsZSB0byBlYXNpbHkgbWFrZSB0aGUgaGV4YWdvbiBzaGFwZXMuDQo=</div>
&nbsp;
<hr />
<p style="text-align: center;"> A work by <a href="https://github.com/datadavidz/">datadavidz</a></p>
&nbsp;
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://datadavidz.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("2021-04-13_tt_PostOffices.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
